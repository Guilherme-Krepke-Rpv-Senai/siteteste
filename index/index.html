<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STYLE CO. - Loja de Roupas</title>
    <link rel="stylesheet" href="../style/style.css">
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="header-content">
            <h1 class="logo">STYLE CO.</h1>
            
            <nav class="nav-desktop">
                <button onclick="showPage('home')">Home</button>
                <button onclick="showPage('loja')">Loja</button>
                <button id="navCadastro" onclick="showPage('cadastro')" class="hidden">Cadastrar</button>
                <button id="navVendedor" onclick="showPage('vendedor')" class="hidden">Painel</button>
                <button onclick="showPage('sobre')">Sobre</button>
            </nav>

            <div class="header-right">
                <button class="theme-btn" onclick="toggleDarkMode()">üåô</button>
                <button class="cart-btn" onclick="window.location.href='carrinho.html'">
                    üõí
                    <span class="cart-badge" id="cartBadge" class="hidden">0</span>
                </button>
                <div id="userInfo" class="user-info hidden">
                    <span id="userName"></span>
                    <button onclick="logout()" class="btn-logout">Sair</button>
                </div>
                <button id="btnLogin" class="btn-login" onclick="showPage('login')">Login</button>
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
            </div>
        </div>

        <nav class="nav-mobile" id="mobileMenu">
            <button onclick="showPage('home'); toggleMobileMenu()">Home</button>
            <button onclick="showPage('loja'); toggleMobileMenu()">Loja</button>
            <button id="navCadastroMobile" onclick="showPage('cadastro'); toggleMobileMenu()" class="hidden">Cadastrar</button>
            <button id="navVendedorMobile" onclick="showPage('vendedor'); toggleMobileMenu()" class="hidden">Painel</button>
            <button onclick="showPage('sobre'); toggleMobileMenu()">Sobre</button>
        </nav>
    </header>

    <!-- MAIN -->
    <main>
        <!-- CADASTRO USU√ÅRIO PAGE -->
        <div id="cadastro-usuario" class="page hidden">
            <section>
                <h2>Criar Conta</h2>
                <div class="login-container" style="max-width: 500px;">
                    <div class="form-container">
                        <div class="form-group">
                            <label>Nome Completo</label>
                            <input type="text" id="regNome" placeholder="Seu nome completo">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="regEmail" placeholder="seu@email.com">
                        </div>
                        <div class="form-group">
                            <label>Senha (M√≠nimo 6 caracteres)</label>
                            <input type="password" id="regPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <div class="form-group">
                            <label>Confirmar Senha</label>
                            <input type="password" id="regPasswordConfirm" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                        </div>
                        <div class="form-group">
                            <label>Tipo de Conta</label>
                            <select id="regTipoConta">
                                <option value="cliente">Cliente</option>
                                <option value="vendedor">Vendedor</option>
                            </select>
                        </div>
                        <button class="btn-primary" onclick="registerNewUser()">Criar Conta</button>
                        <p style="text-align: center; margin-top: 1rem; font-weight: 600;">
                            J√° tem conta? <span onclick="showPage('login')" style="color: var(--primary); cursor: pointer; text-decoration: underline;">Fa√ßa login aqui</span>
                        </p>
                    </div>
                </div>
            </section>
        </div>
            <section>
                <h2>Login / Cadastro</h2>
                <div class="login-container">
                    <div class="login-tabs">
                        <button class="tab-btn active" onclick="switchTab('tab-login')">Login</button>
                        <button class="tab-btn" onclick="switchTab('tab-cadastro')">Cadastro</button>
                    </div>

                    <!-- LOGIN -->
                    <div id="tab-login" class="tab-content active">
                        <div class="form-container">
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="loginEmail" placeholder="seu@email.com">
                            </div>
                            <div class="form-group">
                                <label>Senha</label>
                                <input type="password" id="loginPassword" placeholder="Sua senha">
                            </div>
                            <button class="btn-primary" onclick="handleLogin()">Entrar</button>
                        </div>
                    </div>

                    <!-- CADASTRO -->
                    <div id="tab-cadastro" class="tab-content">
                        <div class="form-container">
                            <div class="form-group">
                                <label>Nome Completo</label>
                                <input type="text" id="cadastroNome" placeholder="Seu nome">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" id="cadastroEmail" placeholder="seu@email.com">
                            </div>
                            <div class="form-group">
                                <label>Senha</label>
                                <input type="password" id="cadastroPassword" placeholder="M√≠nimo 6 caracteres">
                            </div>
                            <div class="form-group">
                                <label>Confirmar Senha</label>
                                <input type="password" id="cadastroPasswordConfirm" placeholder="Confirme sua senha">
                            </div>
                            <div class="form-group">
                                <label>Tipo de Conta</label>
                                <select id="tipoConta">
                                    <option value="cliente">Cliente</option>
                                    <option value="vendedor">Vendedor</option>
                                </select>
                            </div>
                            <button class="btn-primary" onclick="handleCadastro()">Criar Conta</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- HOME PAGE -->
        <div id="home" class="page">
            <section class="hero">
                <h2 style="color: #1f2937 !important; text-shadow: none !important;">Bem-vindo √† STYLE CO.</h2>
                <p style="color: #1f2937 !important; text-shadow: none !important;">Moda minimalista com qualidade e personalidade</p>
                <div class="hero-buttons">
                    <button class="btn-primary" onclick="showPage('loja')">Ver Produtos</button>
                    <button class="btn-secondary" id="btnCadastrarProduto" onclick="showPage('cadastro')" class="hidden">Cadastrar Produto</button>
                </div>
            </section>

            <section>
                <h3>Destaque de Produtos</h3>
                <div class="products-grid" id="destaqueProducts"></div>
            </section>
        </div>

        <!-- LOJA PAGE -->
        <div id="loja" class="page hidden">
            <section>
                <h2>Nossa Loja</h2>
                <div class="filtros">
                    <button class="filter-btn active" onclick="filterProducts('todos')">Todos</button>
                    <button class="filter-btn" onclick="filterProducts('camisetas')">Camisetas</button>
                    <button class="filter-btn" onclick="filterProducts('cal√ßas')">Cal√ßas</button>
                    <button class="filter-btn" onclick="filterProducts('jaquetas')">Jaquetas</button>
                    <button class="filter-btn" onclick="filterProducts('vestidos')">Vestidos</button>
                </div>
                <div class="products-grid" id="lojaProducts"></div>
            </section>
        </div>

        <!-- CADASTRO PAGE (Apenas para vendedores) -->
        <div id="cadastro" class="page hidden">
            <section>
                <h2>Cadastrar Produto</h2>
                <div class="form-container">
                    <div class="form-group">
                        <label>Nome do Produto</label>
                        <input type="text" id="prodName" placeholder="Ex: Camiseta">
                    </div>
                    <div class="form-group">
                        <label>Pre√ßo</label>
                        <input type="number" id="prodPrice" placeholder="Ex: 79.90" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Categoria</label>
                        <select id="prodCategory">
                            <option value="camisetas">Camisetas</option>
                            <option value="cal√ßas">Cal√ßas</option>
                            <option value="jaquetas">Jaquetas</option>
                            <option value="vestidos">Vestidos</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Descri√ß√£o</label>
                        <textarea id="prodDesc" placeholder="Descri√ß√£o do produto"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Imagem do Produto</label>
                        <div class="file-input-wrapper" id="fileWrapper">
                            <label class="file-input-label">
                                <div class="file-input-text">üì∏ Clique ou arraste uma imagem</div>
                                <div class="file-input-subtext">PNG, JPG ou GIF (m√°x. 5MB)</div>
                                <input type="file" id="prodImage" accept="image/*" onchange="previewImage(event)">
                            </label>
                            <img id="imagePreview" class="preview-image hidden">
                        </div>
                    </div>
                    <button class="btn-primary" onclick="addProduct()">Cadastrar Produto</button>
                </div>
            </section>
        </div>

        <!-- PAINEL VENDEDOR -->
        <div id="vendedor" class="page hidden">
            <section>
                <h2>Painel do Vendedor</h2>
                <div class="vendedor-container">
                    <h3>Seus Produtos</h3>
                    <div class="products-list" id="vendedorProducts"></div>
                </div>
            </section>
        </div>

        <!-- DETALHES PAGE -->
        <div id="detalhes" class="page hidden">
            <section>
                <button class="btn-voltar" onclick="showPage('loja')">‚Üê Voltar</button>
                <div class="detalhes-container">
                    <div class="detalhes-image" id="detImage"></div>
                    <div class="detalhes-info">
                        <h2 id="detName"></h2>
                        <p class="product-desc" id="detDesc"></p>
                        <p class="price" id="detPrice"></p>
                        <div class="detalhes-actions">
                            <button class="btn-comprar" onclick="addToCartFromDetail()">Comprar Agora</button>
                            <button class="btn-primary" onclick="showPage('loja')">Continuar Shopping</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>

        <!-- SOBRE PAGE -->
        <div id="sobre" class="page hidden">
            <section>
                <h2>Sobre a STYLE CO.</h2>
                <div class="sobre-container">
                    <p>A STYLE CO. √© uma loja minimalista dedicada a oferecer moda de qualidade com personalidade. Acreditamos que estilo √© acess√≠vel e que cada pe√ßa deve contar uma hist√≥ria.</p>
                    <p>Nossa miss√£o √© trazer pe√ßas sofisticadas que combinam conforto, qualidade e design moderno para o seu dia a dia.</p>
                    
                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(0,0,0,0.1);">
                        <h3>Conecte-se Conosco</h3>
                        <div class="social-links">
                            <button class="social-btn facebook">Facebook</button>
                            <button class="social-btn instagram">Instagram</button>
                            <button class="social-btn twitter">Twitter</button>
                        </div>
                    </div>

                    <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid rgba(0,0,0,0.1);">
                        <h3>Entre em Contato</h3>
                        <div class="form-container">
                            <div class="form-group">
                                <label>Seu Nome</label>
                                <input type="text" placeholder="Nome">
                            </div>
                            <div class="form-group">
                                <label>Seu Email</label>
                                <input type="email" placeholder="Email">
                            </div>
                            <div class="form-group">
                                <label>Mensagem</label>
                                <textarea placeholder="Sua mensagem"></textarea>
                            </div>
                            <button class="btn-primary">Enviar Mensagem</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <p>&copy; 2024 STYLE CO. - Todos os direitos reservados.</p>
        <p>Desenvolvido com ‚ù§Ô∏è | Moda, qualidade e estilo</p>
    </footer>

    <script>
        // ========== SISTEMA DE AUTENTICA√á√ÉO ==========
        let currentUser = null;
        let users = [];

        // Carregar usu√°rios do localStorage
        function loadUsers() {
            const savedUsers = JSON.parse(localStorage.getItem('users')) || [];
            users = savedUsers;
        }

        // Validar for√ßa da senha
        function validatePassword(password) {
            return password.length >= 6;
        }

        // REGISTRAR NOVO USU√ÅRIO
        function registerNewUser() {
            const nome = document.getElementById('regNome').value.trim();
            const email = document.getElementById('regEmail').value.trim();
            const password = document.getElementById('regPassword').value;
            const passwordConfirm = document.getElementById('regPasswordConfirm').value;
            const tipo = document.getElementById('regTipoConta').value;

            // Valida√ß√µes
            if (!nome || !email || !password || !passwordConfirm) {
                alert('‚ùå Preencha todos os campos!');
                return;
            }

            if (!validatePassword(password)) {
                alert('‚ùå Senha deve ter no m√≠nimo 6 caracteres!');
                return;
            }

            if (password !== passwordConfirm) {
                alert('‚ùå As senhas n√£o conferem!');
                return;
            }

            // Validar email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                alert('‚ùå Email inv√°lido!');
                return;
            }

            // Verificar se email j√° existe
            if (users.find(u => u.email === email)) {
                alert('‚ùå Este email j√° est√° cadastrado!');
                return;
            }

            // Criar novo usu√°rio
            const newUser = { nome, email, password, tipo, dataCadastro: new Date().toLocaleDateString() };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            alert('‚úÖ Cadastro realizado com sucesso! Fa√ßa login para continuar.');
            
            // Limpar formul√°rio
            document.getElementById('regNome').value = '';
            document.getElementById('regEmail').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regPasswordConfirm').value = '';
            
            // Redirecionar para login
            showPage('login');
        }

        // Handle Login
        function handleLogin() {
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                alert('‚ùå Preencha todos os campos!');
                return;
            }

            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = { email: user.email, nome: user.nome, tipo: user.tipo };
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUI();
                showPage('home');
                document.getElementById('loginEmail').value = '';
                document.getElementById('loginPassword').value = '';
                alert('‚úÖ Login realizado com sucesso! Bem-vindo, ' + user.nome + '!');
            } else {
                alert('‚ùå Email ou senha incorretos!');
            }
        }

        // Handle Cadastro (da aba)
        function handleCadastro() {
            const nome = document.getElementById('cadastroNome').value.trim();
            const email = document.getElementById('cadastroEmail').value.trim();
            const password = document.getElementById('cadastroPassword').value;
            const passwordConfirm = document.getElementById('cadastroPasswordConfirm').value;
            const tipo = document.getElementById('tipoConta').value;

            if (!nome || !email || !password || !passwordConfirm) {
                alert('‚ùå Preencha todos os campos!');
                return;
            }

            if (!validatePassword(password)) {
                alert('‚ùå Senha deve ter no m√≠nimo 6 caracteres!');
                return;
            }

            if (password !== passwordConfirm) {
                alert('‚ùå As senhas n√£o conferem!');
                return;
            }

            if (users.find(u => u.email === email)) {
                alert('‚ùå Este email j√° est√° cadastrado!');
                return;
            }

            const newUser = { nome, email, password, tipo };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            alert('‚úÖ Cadastro realizado com sucesso! Fa√ßa login para continuar.');
            switchTab('tab-login');
            document.getElementById('cadastroNome').value = '';
            document.getElementById('cadastroEmail').value = '';
            document.getElementById('cadastroPassword').value = '';
            document.getElementById('cadastroPasswordConfirm').value = '';
        }

        // Logout
        function logout() {
            currentUser = null;
            localStorage.removeItem('currentUser');
            updateUI();
            showPage('home');
        }

        // Atualizar UI baseado no usu√°rio logado
        function updateUI() {
            const btnLogin = document.getElementById('btnLogin');
            const userInfo = document.getElementById('userInfo');
            const navCadastro = document.getElementById('navCadastro');
            const navCadastroMobile = document.getElementById('navCadastroMobile');
            const navVendedor = document.getElementById('navVendedor');
            const navVendedorMobile = document.getElementById('navVendedorMobile');
            const btnCadastrarProduto = document.getElementById('btnCadastrarProduto');

            if (currentUser) {
                btnLogin.classList.add('hidden');
                userInfo.classList.remove('hidden');
                document.getElementById('userName').textContent = `Ol√°, ${currentUser.nome}`;

                if (currentUser.tipo === 'vendedor') {
                    navCadastro.classList.remove('hidden');
                    navCadastroMobile.classList.remove('hidden');
                    navVendedor.classList.remove('hidden');
                    navVendedorMobile.classList.remove('hidden');
                    btnCadastrarProduto.classList.remove('hidden');
                } else {
                    navCadastro.classList.add('hidden');
                    navCadastroMobile.classList.add('hidden');
                    navVendedor.classList.add('hidden');
                    navVendedorMobile.classList.add('hidden');
                    btnCadastrarProduto.classList.add('hidden');
                }
            } else {
                btnLogin.classList.remove('hidden');
                userInfo.classList.add('hidden');
                navCadastro.classList.add('hidden');
                navCadastroMobile.classList.add('hidden');
                navVendedor.classList.add('hidden');
                navVendedorMobile.classList.add('hidden');
                btnCadastrarProduto.classList.add('hidden');
            }
        }

        // Switch de abas no login
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // ========== DADOS E PRODUTOS ==========
        let products = [
            { id: 1, name: 'Camiseta Premium', price: 79.90, category: 'camisetas', image: 'üëï', description: 'Camiseta de algod√£o 100% confort√°vel', vendedor: 'admin' },
            { id: 2, name: 'Cal√ßa Jeans', price: 129.90, category: 'cal√ßas', image: 'üëñ', description: 'Cal√ßa jeans cl√°ssica de qualidade', vendedor: 'admin' },
            { id: 3, name: 'Jaqueta Bomber', price: 199.90, category: 'jaquetas', image: 'üß•', description: 'Jaqueta bomber moderna e vers√°til', vendedor: 'admin' },
            { id: 4, name: 'Vestido Casual', price: 159.90, category: 'vestidos', image: 'üëó', description: 'Vestido leve perfeito para o dia a dia', vendedor: 'admin' },
        ];
        let cart = [];
        let currentFilter = 'todos';
        let selectedProduct = null;

        // CARREGAR DADOS
        function loadData() {
            const savedProducts = localStorage.getItem('products');
            const savedCart = localStorage.getItem('cart');
            if (savedProducts) products = JSON.parse(savedProducts);
            if (savedCart) cart = JSON.parse(savedCart);
            updateCartBadge();
            renderAllProducts();
            renderVendedorProducts();
            loadUsers();
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) currentUser = JSON.parse(savedUser);
            updateUI();
        }

        // SALVAR DADOS
        function saveData() {
            localStorage.setItem('products', JSON.stringify(products));
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // MOSTRAR/ESCONDER P√ÅGINA
        function showPage(pageName) {
            if (pageName === 'cadastro' || pageName === 'vendedor') {
                if (!currentUser || currentUser.tipo !== 'vendedor') {
                    alert('Apenas vendedores podem acessar esta p√°gina!');
                    return;
                }
            }
            
            document.querySelectorAll('.page').forEach(page => page.classList.add('hidden'));
            document.getElementById(pageName).classList.remove('hidden');
            window.scrollTo(0, 0);
        }

        // DARK MODE
        function toggleDarkMode() {
            document.body.classList.toggle('dark');
            localStorage.setItem('darkMode', document.body.classList.contains('dark'));
        }

        // MOBILE MENU
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('active');
        }

        // RENDERIZAR PRODUTOS
        function renderProducts(containerId, productsToRender) {
            const html = productsToRender.map(p => `
                <div class="product-card">
                    <div class="product-image" onclick="viewProduct(${p.id})">
                        ${p.isImage ? `<img src="${p.image}" alt="${p.name}">` : p.image}
                    </div>
                    <h4>${p.name}</h4>
                    <p class="product-desc">${p.description}</p>
                    <p class="price">R$ ${p.price.toFixed(2)}</p>
                    <div class="product-actions">
                        <button class="btn-details" onclick="viewProduct(${p.id})">Detalhes</button>
                        <button class="btn-add" onclick="addToCart(${p.id})">+</button>
                    </div>
                </div>
            `).join('');
            document.getElementById(containerId).innerHTML = html;
        }

        // RENDERIZAR PRODUTOS DO VENDEDOR
        function renderVendedorProducts() {
            if (!currentUser || currentUser.tipo !== 'vendedor') return;

            const meusProducts = products.filter(p => p.vendedor === currentUser.email);
            const html = meusProducts.map(p => `
                <div class="vendedor-product-item">
                    <div class="vendedor-product-image">
                        ${p.isImage ? `<img src="${p.image}" alt="${p.name}">` : p.image}
                    </div>
                    <div class="vendedor-product-info">
                        <h4>${p.name}</h4>
                        <p>R$ ${p.price.toFixed(2)}</p>
                        <p class="product-desc">${p.description}</p>
                    </div>
                    <div class="vendedor-product-actions">
                        <button class="btn-edit" onclick="editProduct(${p.id})">Editar</button>
                        <button class="btn-delete" onclick="deleteProduct(${p.id})">Deletar</button>
                    </div>
                </div>
            `).join('');
            document.getElementById('vendedorProducts').innerHTML = html || '<p>Voc√™ n√£o tem produtos cadastrados</p>';
        }

        // RENDERIZAR TODOS OS PRODUTOS
        function renderAllProducts() {
            renderProducts('destaqueProducts', products.slice(0, 4));
            filterProducts('todos');
        }

        // FILTRAR PRODUTOS
        function filterProducts(category) {
            currentFilter = category;
            const filtered = category === 'todos' ? products : products.filter(p => p.category === category);
            renderProducts('lojaProducts', filtered);
            
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            
            // Encontrar o bot√£o correto e marcar como ativo
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => {
                if (btn.textContent.toLowerCase().includes(category) || 
                    (category === 'todos' && btn.textContent.toLowerCase() === 'todos')) {
                    btn.classList.add('active');
                }
            });
        }

        // VER DETALHES
        function viewProduct(id) {
            selectedProduct = products.find(p => p.id === id);
            const detImage = document.getElementById('detImage');
            if (selectedProduct.isImage) {
                detImage.innerHTML = `<img src="${selectedProduct.image}" alt="${selectedProduct.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 0.5rem;">`;
            } else {
                detImage.innerHTML = selectedProduct.image;
            }
            document.getElementById('detName').innerHTML = selectedProduct.name;
            document.getElementById('detDesc').innerHTML = selectedProduct.description;
            document.getElementById('detPrice').innerHTML = `R$ ${selectedProduct.price.toFixed(2)}`;
            showPage('detalhes');
        }

        // ADICIONAR AO CARRINHO
        function addToCart(id) {
            const product = products.find(p => p.id === id);
            const existing = cart.find(item => item.id === id);
            
            if (existing) {
                existing.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            saveData();
            updateCartBadge();
            alert('Adicionado ao carrinho!');
        }

        // ADICIONAR AO CARRINHO DO DETALHE
        function addToCartFromDetail() {
            addToCart(selectedProduct.id);
        }

        // ATUALIZAR BADGE DO CARRINHO
        function updateCartBadge() {
            const badge = document.getElementById('cartBadge');
            if (cart.length > 0) {
                badge.innerHTML = cart.length;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        // PREVIEW DE IMAGEM
        function previewImage(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('imagePreview');
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }

        // ADICIONAR PRODUTO (apenas vendedor)
        function addProduct() {
            if (!currentUser || currentUser.tipo !== 'vendedor') {
                alert('Apenas vendedores podem cadastrar produtos!');
                return;
            }

            const name = document.getElementById('prodName').value;
            const price = parseFloat(document.getElementById('prodPrice').value);
            const category = document.getElementById('prodCategory').value;
            const description = document.getElementById('prodDesc').value;
            const imageInput = document.getElementById('prodImage');
            
            if (!name || !price) {
                alert('Preencha todos os campos obrigat√≥rios!');
                return;
            }

            const newProduct = {
                id: Date.now(),
                name,
                price,
                category,
                description,
                image: 'üëï',
                isImage: false,
                vendedor: currentUser.email
            };

            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newProduct.image = e.target.result;
                    newProduct.isImage = true;
                    products.push(newProduct);
                    saveData();
                    clearForm();
                    renderVendedorProducts();
                    alert('Produto cadastrado com sucesso!');
                    renderAllProducts();
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                products.push(newProduct);
                saveData();
                clearForm();
                renderVendedorProducts();
                alert('Produto cadastrado com sucesso!');
                renderAllProducts();
            }
        }

        // DELETAR PRODUTO
        function deleteProduct(id) {
            if (!confirm('Tem certeza que deseja deletar este produto?')) return;
            
            const product = products.find(p => p.id === id);
            if (product.vendedor !== currentUser.email) {
                alert('Voc√™ n√£o tem permiss√£o para deletar este produto!');
                return;
            }

            products = products.filter(p => p.id !== id);
            saveData();
            renderVendedorProducts();
            renderAllProducts();
            alert('Produto deletado com sucesso!');
        }

        // EDITAR PRODUTO
        function editProduct(id) {
            alert('Funcionalidade de edi√ß√£o em desenvolvimento!');
        }

        // LIMPAR FORMUL√ÅRIO
        function clearForm() {
            document.getElementById('prodName').value = '';
            document.getElementById('prodPrice').value = '';
            document.getElementById('prodDesc').value = '';
            document.getElementById('prodImage').value = '';
            document.getElementById('imagePreview').classList.add('hidden');
        }

        // INICIALIZAR
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark');
            }
        });
    </script>
</body>
</html>